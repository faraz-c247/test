#!/bin/sh

commit_msg_file=$1
commit_msg=$(cat "$commit_msg_file")

valid_regex="^(feat|fix|chore|docs|style|refactor|test|perf|ci|build|revert)(\(.+\))?: .+"

if ! echo "$commit_msg" | grep -E "$valid_regex" >/dev/null; then
  echo ""
  echo "‚ùå Invalid commit message: '$commit_msg'"
  echo ""
  echo "Commit message must follow Conventional Commits format:"
  echo "  <type>(<scope>): <subject>"
  echo ""
  echo "Allowed types: feat, fix, chore, docs, style, refactor, test, perf, ci, build, revert"
  echo "Scope is optional: e.g., fix(auth): correct token bug"
  echo ""
  echo "Examples:"
  echo "  feat: add login page"
  echo "  fix(auth): resolve token bug"
  echo "  chore: update dependencies"
  echo ""
  exit 1
fi
